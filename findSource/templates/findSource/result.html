<%inherit file="base.html" />
<%def name="title()">Sourcerous - result</%def>
<%def name="js_defer()">
    ${ parent.js_defer()}
    <script type="text/javascript" src="/static/findSource/js/findSource.js"></script>

    <script language="javascript">
      function setSB(v, el) {
        var ie5 = (document.all  &&  document.getElementsByTagName);
        if (ie5 || document.readyState == "complete")     {
          filterEl = el.children[0];
          valueEl = el.children[1];
          filterEl.style.width = v + "%";
          valueEl.innerText = v + "%";
        }
      }
      function fakeProgress(v, el) {
        if (v > 100)
          location.href = "/";
        else     {
          setSB(v, el);
          window.setTimeout("fakeProgress(" + (++v) + ", document.all['" + el.id + "'])", 20);
        }
      } 
    </script>     
</%def>

<%def name="css_files()">
    ${ parent.css_files() }
</%def>

<body onload="fakeProgress(0, sb)" topmargin=180 bgcolor='#CCCCCC'>
<center> 
<p align=center style="font-szie:9pt; line-height: 100%">Loading……</p>
<span id=sb style="width: 500px">
<div style="filter: Alpha(Opacity=0, FinishOpacity=60, style=1, StartX=0, StartY=0, FinishX=100, FinishY=0); width: 0%; height: 12px; position: absolute; background: #9999ff"></div>
<div style="font-size: 12px; width: 100%; color: #ff3333; font-family: arial; text-align: center"></DIV>
</span>
</center>

<h3>Result for ${ userInput }: </h3>
<div class="col-md-12">
  % if object_list:
  % for (site, info) in object_list.iteritems():
    <p4>Results in ${ site }:</p4>
        % for article in info:
        <dl class="dl-horizontal">
            <dt>Article Title</dt>
            <dd><a href= ${ article['url'] }>${ article['title'] }</a></dd>
        </dl>
        <dl class="dl-horizontal">
            <dt>Source</dt>
            <dd>${ article['original_source'] }</dd>
        </dl>
        <dl class="dl-horizontal">
            <dt>Author</dt>
            <dd>${ article['author'] }</dd>
        </dl>

        % if article['people']:
            <dl class="dl-horizontal">
                <dt>people</dt>
                <dd>

                    <table class="table">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Company</th>
                            <th>Job Title</th>
                            <th>quotation</th> 
                            <th>LinkedIn</th>
                        </tr>
                    </thead>
                    <tbody>
                        % for (name, person) in article['people'].iteritems():
                        <tr>
                            <td><a href="/Sourcerous/${ name+ '%20' + userInput }">${ name } </a></td>
                            <td>${ person['company'] }</td>
                            <td>${ person['job_title'] }</td>
                            <td>${ person['quotation'] }</td> 
                            <td><a href="${person['linkedInLink']}">Click Me</a></td>
                        </tr> 
                        % endfor                    

                    </tbody>
                    </table>                  
                </dd>
            </dl>

        % else:
            <dl class="dl-horizontal">
                <dt>people</dt>
                <dd>        
                No source found in this article  
                </dd>
            </dl>            
        %endif
        % endfor
      % endfor
    % endif
</div>

